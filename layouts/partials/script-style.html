<!-- From wordpress site -->
<link rel='stylesheet' id='lightweight-accordion-css' href='https://ll-nav.blackaeonium.net/wp-content/plugins/lightweight-accordion/lightweight-accordion.css?ver=1.3.2' media='all' />
<script src="//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js?ver=6.4.3" id="mathjax-js"></script>
<script src="https://ll-nav.blackaeonium.net/wp-content/themes/picostrap5-child-base/js/bootstrap.bundle.min.js" id="bootstrap5-childtheme-js" defer data-wp-strategy="defer"></script>

<script>
// ---------
// Script to show and hide hamburger menu 
// ---------
    
// Grab both the menu button, the page content and footer
var menuButton = document.getElementById("menu-button");
var pageContent = document.getElementById("theme-main"); 
var footer = document.getElementById("wrapper-footer-colophon"); 
  
// Store display status of menu
var menuDisplay = false;
    
// Store content scroll position
var scrollPosition;

// Listen for click - call showhideMenu
menuButton.addEventListener("click", showHideMenu);

// Menu uses bootstraps "collapse" function
// If menu is hidden, bootstrap will show it, hide page content.
// If it's displayed, bootstrap will hide it, show the content.


// Function to toggle the visibility of a menu and adjust page content accordingly.
function showHideMenu() {
    
    // Check if the menu is currently hidden
    if (menuDisplay == false) {
        // Set the menu display flag to true (menu is now shown)and save scroll position
        menuDisplay = true;                     
        scrollPosition = window.scrollY;   

        // Hide the main page content and footer
        pageContent.style.display = "none";
        footer.style.display = "none";          

    } else {
        // Set the menu display flag to false (menu is now hidden)
        menuDisplay = false;                    

        // Show the main page content and footer
        pageContent.style.display = "block"; 
        footer.style.display = "block"; 
        
        // Temporarily disable smooth scrolling to jump to the saved scroll position
        document.documentElement.style.scrollBehavior = "auto";
        
        // Scroll to the saved scroll position
        window.scroll(0, scrollPosition);
        
        // Re-enable smooth scrolling
        document.documentElement.style.scrollBehavior = "smooth";
    }
}
 
// ---------
// Script to turn on embed mode
// Remove top nav, footer, breadcrumbs, right nav, keywords
// Options to remove prev/next, h1, p lead

// ---------

// Dark mode script
(function() {
    'use strict';

    const getStoredTheme = () => localStorage.getItem('theme');

    const setStoredTheme = theme => localStorage.setItem('theme', theme);

    const getPreferredTheme = () => {
      const storedTheme = getStoredTheme();
      return storedTheme ? storedTheme : (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    };

    const setTheme = theme => {
      const themeToSet = theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme;
      document.documentElement.setAttribute('data-bs-theme', themeToSet);
    };

    const showActiveTheme = theme => {
      document.querySelectorAll('.theme-switch').forEach(themeSwitcher => {
        themeSwitcher.querySelectorAll('[data-bs-theme-value]').forEach(element => {
          element.checked = (element.getAttribute('data-bs-theme-value') === theme);
        });
      });
    };

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
      const storedTheme = getStoredTheme();
      if (storedTheme !== 'light' && storedTheme !== 'dark') {
        setTheme(getPreferredTheme());
      }
    });

    window.addEventListener('DOMContentLoaded', () => {
      showActiveTheme(getPreferredTheme());
      document.querySelectorAll('.theme-switch [data-bs-theme-value]').forEach(toggle => {
        toggle.addEventListener('change', () => {
          const theme = toggle.getAttribute('data-bs-theme-value');
          setStoredTheme(theme);
          setTheme(theme);
          showActiveTheme(theme);
        });
      });
    });
  })();
    
</script>
    
    